#!/usr/bin/env python3

import subprocess
import sys

CLIPS = {
    'shrug': "¯\_(ツ)_/¯",
    'shrug2': "¯\(°_o)/¯",
    'check': "✓",
    'chbox': "☑",
    'nochbox': "☐",
    'thumb': "👍",
    'thumbdown': "👎",
    'poop': "💩",
    'snowman': "☃",
    'flip': "(╯°□°）╯︵ ┻━┻",
    'heart': "❤️",
    'heartp': "️💜",
    'lod': "ಠ_ಠ",
    'goat': "🐐",
    'lenny': "( ͡° ͜ʖ ͡°)",
    'yeah': "ᕕ( ᐛ )ᕗ",
    'donger': "ヽ༼ຈل͜ຈ༽ﾉ",
    'tiger': "🐯",
    'eye': "👁",
    'note': "♫",
    'kirby': "<(^.^<) (>^.^)>",
}

def print_clips(CLIPS):
    print("Available clips:")
    for c, v in sorted(CLIPS.items()):
        print(c, v)


def get_requested_clips(all_clips, requested_clips):
    result = []
    for clip in requested_clips:
        if clip not in all_clips:
            print("No clip named {!r}".format(clip), file=sys.stderr)
            continue

        result.append(all_clips[clip])

    return result


def copy_to_clipboard(output):
    # todo: replace this with pyperclip
    cmd = "echo -n '{}' | pbcopy".format(' '.join(output).replace("'", "'\\''"))
    subprocess.check_call(cmd, shell=True, executable='/bin/bash')


if __name__ == '__main__':
    clips = sys.argv[1:]
    if not clips:
        print_clips(CLIPS)
        sys.exit()

    output = get_requested_clips(CLIPS, clips)

    copy_to_clipboard(output)
