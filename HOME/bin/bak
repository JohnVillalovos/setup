#!/usr/bin/env python3
import argparse
import logging
import os
import sys

from lib.backup import back_up_existing_file

def main(args):
    files = args.files
    keep = args.keep

    for file in files:
        if not os.path.exists(file):
            print(f"File {file!r} doesn't exist, skipping")
            continue

        back_up_existing_file(file, keep)


if __name__ == '__main__':
    logging.basicConfig(level=logging.INFO)

    parser = argparse.ArgumentParser(description='Back up specified files')
    parser.add_argument('files', nargs='+', help='Files to back up')
    parser.add_argument('-k', '--keep', action='store_true',
                        help='Keep existing file')

    args = parser.parse_args()
    main(args)

